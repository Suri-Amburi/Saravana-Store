sap.ui.define([                                                                                                                                                                                                                                                
"jquery.sap.global",                                                                                                                                                                                                                                           
"sap/m/MessageToast",                                                                                                                                                                                                                                          
"sap/ui/core/Fragment",                                                                                                                                                                                                                                        
"sap/ui/core/mvc/Controller",                                                                                                                                                                                                                                  
"sap/ui/model/Filter",                                                                                                                                                                                                                                         
"sap/ui/model/json/JSONModel"                                                                                                                                                                                                                                  
], function (jQuery, MessageToast, Fragment, Controller, Filter, JSONModel) {                                                                                                                                                                                  
"use strict";                                                                                                                                                                                                                                                  
var Applic,Info2,Info3,sec,ReqId1,check,deck,superkey,selectbranch;                                                                                                                                                                                            
return Controller.extend("ztest.controller.View4", {                                                                                                                                                                                                           
	onInit: function ()&nbsp;                                                                                                                                                                                                                                     
	{                                                                                                                                                                                                                                                             
		var oRouter = sap.ui.core.UIComponent.getRouterFor(this);                                                                                                                                                                                                    
		oRouter.getRoute("View4").attachPatternMatched(this._onObjectMatched, this);                                                                                                                                                                                 
	},                                                                                                                                                                                                                                                            
			                                                                                                                                                                                                                                                            
	_onObjectMatched: function(oEvent)&nbsp;                                                                                                                                                                                                                      
	{                                                                                                                                                                                                                                                             
		var sRootPath = jQuery.sap.getModulePath("ztest");                                                                                                                                                                                                           
		var sImagePath = sRootPath + "/Images/logo1.jpg";                                                                                                                                                                                                            
		this.getView().byId("Image4").setSrc(sImagePath);                                                                                                                                                                                                            
  	    ReqId1 = oEvent.getParameter("arguments").ReqID1;                                                                                                                                                                                                       
  	    Applic= oEvent.getParameter("arguments").Appli;                                                                                                                                                                                                         
  	    selectbranch = oEvent.getParameter("arguments").branchcombo;                                                                                                                                                                                            
  	    Info2= oEvent.getParameter("arguments").Info2;                                                                                                                                                                                                          
  	    Info3= oEvent.getParameter("arguments").Info3;                                                                                                                                                                                                          
  	    superkey = oEvent.getParameter("arguments").appkey;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                 
	    this.getView().byId("HeaderText3").setText(ReqId1);                                                                                                                                                                                                       
	    this.getView().byId("Location21").setText(Info3);                                                                                                                                                                                                         
	    var URL1 = "/sap/opu/odata/sap/ZGW_ARTICLES_SRV/";                                                                                                                                                                                                        
        var oData1 = new sap.ui.model.odata.ODataModel(URL1,true);                                                                                                                                                                                             
        var Location = [];                                                                                                                                                                                                                                     
        var oModel = new sap.ui.model.json.JSONModel();                                                                                                                                                                                                        
        var Class = Applic;                                                                                                                                                                                                                                    
        var Location1 = Info3;                                                                                                                                                                                                                                 
        var Brand ;                                                                                                                                                                                                                                            
        if(Info2 =='X')                                                                                                                                                                                                                                        
	    {                                                                                                                                                                                                                                                         
	   	Brand = "X";                                                                                                                                                                                                                                              
	    }                                                                                                                                                                                                                                                         
	    else&nbsp;                                                                                                                                                                                                                                                
	    {                                                                                                                                                                                                                                                         
	   	Brand = "";                                                                                                                                                                                                                                               
	    }&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                                                                           
        var entity = "article_typeSet?$filter=(Class eq " + "'" + Class + "'" + "and City eq " + "'" + Location1 + "'" + " and BrandId eq " + "'" + Brand + "'" + " )";                                                                                        
        oData1.read(entity,null,null,false,                                                                                                                                                                                                                    
        function(oData21){                                                                                                                                                                                                                                     
        Location = oData21;                                                                                                                                                                                                                                    
        });                                                                                                                                                                                                                                                    
        oModel.setData(Location);                                                                                                                                                                                                                              
        var view4array1 = [];                                                                                                                                                                                                                                  
        var view4array2 = [];                                                                                                                                                                                                                                  
        for (var i=0;i<Location.results.length;i++){                                                                                                                                                                                                           
        	if (view4array1.indexOf(Location.results[i].Lifnr) === -1) {                                                                                                                                                                                          
            view4array1.push(Location.results[i].Name1);                                                                                                                                                                                                       
            view4array1.push(Location.results[i].Lifnr);                                                                                                                                                                                                       
            view4array1.push(Location.results[i].Stcd3);                                                                                                                                                                                                       
            view4array1.push(Location.results[i].BrandId);                                                                                                                                                                                                     
            var HODobj = {};                                                                                                                                                                                                                                   
            HODobj.Name1 = Location.results[i].Name1;                                                                                                                                                                                                          
            HODobj.Lifnr = Location.results[i].Lifnr;                                                                                                                                                                                                          
            HODobj.Stcd3 = Location.results[i].Stcd3;                                                                                                                                                                                                          
            HODobj.BrandId = Location.results[i].BrandId;                                                                                                                                                                                                      
            view4array2.push(HODobj);                                                                                                                                                                                                                          
			}                                                                                                                                                                                                                                                           
        }                                                                                                                                                                                                                                                      
        Location.dellmodel = view4array2;                                                                                                                                                                                                                      
        oModel.setData(Location);                                                                                                                                                                                                                              
        this.getView().byId("table2").setModel(oModel);                                                                                                                                                                                                        
	},                                                                                                                                                                                                                                                            
		                                                                                                                                                                                                                                                             
	onPage4Back: function(oEvent)                                                                                                                                                                                                                                 
    {                                                                                                                                                                                                                                                          
     	var SelectReqId = this.getView().byId("HeaderText3").getText();                                                                                                                                                                                          
		var oRouter = sap.ui.core.UIComponent.getRouterFor(this);                                                                                                                                                                                                    
		oRouter.navTo("View2",&nbsp;                                                                                                                                                                                                                                 
		{                                                                                                                                                                                                                                                            
		ReqID:SelectReqId,                                                                                                                                                                                                                                           
		Info:Applic                                                                                                                                                                                                                                                  
		                                                                                                                                                                                                                                                             
		});                                                                                                                                                                                                                                                          
	},                                                                                                                                                                                                                                                            
	                                                                                                                                                                                                                                                              
   Supnav:function (oEvent)&nbsp;                                                                                                                                                                                                                              
    {                                                                                                                                                                                                                                                          
    	var Path = oEvent.oSource.getBindingContextPath();                                                                                                                                                                                                        
       	var TableData = this.getView().byId("table2").getModel();                                                                                                                                                                                              
    	var SelectedItem =  TableData.getProperty(Path);                                                                                                                                                                                                          
		sec = SelectedItem.Name1;                                                                                                                                                                                                                                    
		check= SelectedItem.Lifnr;                                                                                                                                                                                                                                   
		deck = SelectedItem.Stcd3;                                                                                                                                                                                                                                   
		this._oDialog = sap.ui.xmlfragment("ztest.Fragments.potype", this);                                                                                                                                                                                          
		this._oDialog.open();                                                                                                                                                                                                                                        
	},                                                                                                                                                                                                                                                            
		                                                                                                                                                                                                                                                             
	onpotypeNext: function(oEvent)                                                                                                                                                                                                                                
	{                                                                                                                                                                                                                                                             
        var key = sap.ui.getCore().byId("RBGROUP1").getSelectedIndex();                                                                                                                                                                                        
        var SelectReqId = this.getView().byId("HeaderText3").getText();                                                                                                                                                                                        
        var oRouter = sap.ui.core.UIComponent.getRouterFor(this);                                                                                                                                                                                              
        if(deck == "")                                                                                                                                                                                                                                         
        {                                                                                                                                                                                                                                                      
        	var peck = "0";                                                                                                                                                                                                                                       
        }                                                                                                                                                                                                                                                      
        else                                                                                                                                                                                                                                                   
        {                                                                                                                                                                                                                                                      
        	peck = deck;                                                                                                                                                                                                                                          
        }                                                                                                                                                                                                                                                      
        if(key == "0"){                                                                                                                                                                                                                                        
      	oRouter.navTo("View5",&nbsp;                                                                                                                                                                                                                            
		{                                                                                                                                                                                                                                                            
		RqID1:SelectReqId,                                                                                                                                                                                                                                           
		First1:Applic,                                                                                                                                                                                                                                               
		Second1:Info2,                                                                                                                                                                                                                                               
		Third1: Info3,                                                                                                                                                                                                                                               
		Fourth1: sec,                                                                                                                                                                                                                                                
		Fifth1:check,                                                                                                                                                                                                                                                
		Sixth1:peck,                                                                                                                                                                                                                                                 
		rarkey: superkey                                                                                                                                                                                                                                             
		});                                                                                                                                                                                                                                                          
		this._oDialog.close();                                                                                                                                                                                                                                       
		this._oDialog.destroy();                                                                                                                                                                                                                                     
        }                                                                                                                                                                                                                                                      
        else if(key == "1"){                                                                                                                                                                                                                                   
    	oRouter.navTo("View6",&nbsp;                                                                                                                                                                                                                              
		{                                                                                                                                                                                                                                                            
		ReqID2:SelectReqId,                                                                                                                                                                                                                                          
		First:Applic,                                                                                                                                                                                                                                                
		Second:Info2,                                                                                                                                                                                                                                                
		Third: Info3,                                                                                                                                                                                                                                                
		Fourth: sec,                                                                                                                                                                                                                                                 
		Fifth:check,                                                                                                                                                                                                                                                 
		Sixth:peck,                                                                                                                                                                                                                                                  
		sirkey: superkey,                                                                                                                                                                                                                                            
		branchno:selectbranch                                                                                                                                                                                                                                        
		                                                                                                                                                                                                                                                             
		});                                                                                                                                                                                                                                                          
		this._oDialog.close();                                                                                                                                                                                                                                       
		this._oDialog.destroy();                                                                                                                                                                                                                                     
        }                                                                                                                                                                                                                                                      
        else                                                                                                                                                                                                                                                   
        {                                                                                                                                                                                                                                                      
		var msg = 'Please Select Atleast One PO Type';                                                                                                                                                                                                               
		MessageToast.show(msg);                                                                                                                                                                                                                                      
		this._oDialog.close();                                                                                                                                                                                                                                       
		this._oDialog.destroy();                                                                                                                                                                                                                                     
        }                                                                                                                                                                                                                                                      
	},                                                                                                                                                                                                                                                            
		                                                                                                                                                                                                                                                             
	onpotypeCancel:function()                                                                                                                                                                                                                                     
	{                                                                                                                                                                                                                                                             
        this._oDialog.close();                                                                                                                                                                                                                                 
        this._oDialog.destroy();                                                                                                                                                                                                                               
	},                                                                                                                                                                                                                                                            
	onSearch: function (oEvent)&nbsp;                                                                                                                                                                                                                             
	{                                                                                                                                                                                                                                                             
        var oTable = this.getView().byId("table2");                                                                                                                                                                                                            
        var sValue = oEvent.getSource().getValue();                                                                                                                                                                                                            
        oTable.getBinding("items").filter([new sap.ui.model.Filter([                                                                                                                                                                                           
        new sap.ui.model.Filter("Name1",sap.ui.model.FilterOperator.Contains, sValue)], false)]);                                                                                                                                                              
	}                                                                                                                                                                                                                                                             
});                                                                                                                                                                                                                                                            
});                                                                                                                                                                                                                                                            