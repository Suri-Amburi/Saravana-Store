sap.ui.define([                                                                                                                                                                                                                                                
"sap/ui/core/mvc/Controller"                                                                                                                                                                                                                                   
], function (Controller, JSONModel) {                                                                                                                                                                                                                          
"use restrict";                                                                                                                                                                                                                                                
var Info,flag;&nbsp;                                                                                                                                                                                                                                           
return Controller.extend("ztest.controller.View2",{                                                                                                                                                                                                            
&nbsp;                                                                                                                                                                                                                                                         
&nbsp;&nbsp;                                                                                                                                                                                                                                                   
  	onInit: function()&nbsp;                                                                                                                                                                                                                                    
  	{                                                                                                                                                                                                                                                           
		var oRouter = sap.ui.core.UIComponent.getRouterFor(this);                                                                                                                                                                                                    
		oRouter.getRoute("View2").attachPatternMatched(this._onObjectMatched, this);                                                                                                                                                                                 
	},                                                                                                                                                                                                                                                            
		                                                                                                                                                                                                                                                             
	_onObjectMatched: function(oEvent)&nbsp;                                                                                                                                                                                                                      
	{                                                                                                                                                                                                                                                             
		var sRootPath = jQuery.sap.getModulePath("ztest");                                                                                                                                                                                                           
			var sImagePath = sRootPath + "/Images/logo1.jpg";                                                                                                                                                                                                           
			this.getView().byId("Image2").setSrc(sImagePath);                                                                                                                                                                                                           
		var ReqId = oEvent.getParameter("arguments").ReqID;                                                                                                                                                                                                          
		Info = oEvent.getParameter("arguments").Info;                                                                                                                                                                                                                
		this.getView().byId("HeaderText1").setText(ReqId);                                                                                                                                                                                                           
		var URL1 = "/sap/opu/odata/sap/ZGW_CITY_SRV/";                                                                                                                                                                                                               
        var oData1 = new sap.ui.model.odata.ODataModel(URL1,true);                                                                                                                                                                                             
        var Location = [];                                                                                                                                                                                                                                     
        var oModel = new sap.ui.model.json.JSONModel();                                                                                                                                                                                                        
        flag = Info;                                                                                                                                                                                                                                           
        var Key = this.getView().byId("RBGROUP0").getSelectedIndex();                                                                                                                                                                                          
        if(Key == "0")                                                                                                                                                                                                                                         
        {                                                                                                                                                                                                                                                      
        	var branch = "O";                                                                                                                                                                                                                                     
        	var comData = { items:[ {key:"0",Category:"Saravana- Madhavaram DC"}]};                                                                                                                                                                               
        	this.getView().byId("branchCombo").setModel(oModel);                                                                                                                                                                                                  
        	this.getView().byId("branchCombo").setSelectedKey('0');                                                                                                                                                                                               
        }                                                                                                                                                                                                                                                      
        else                                                                                                                                                                                                                                                   
        {                                                                                                                                                                                                                                                      
        	 branch = "L";                                                                                                                                                                                                                                        
        	  comData = { items:[ {key:"0",Category:"Saravana- T-Nagar Store"},&nbsp;                                                                                                                                                                             
        						{key:"1",Category:"Saravana- Purasaiwalkam Store"},                                                                                                                                                                                              
        						{key:"2",Category:"Saravana- Chrompet Store"},&nbsp;                                                                                                                                                                                             
        						{key:"3",Category:"Saravana- Porur Store"} ] };                                                                                                                                                                                                  
        						this.getView().byId("branchCombo").setModel(oModel);                                                                                                                                                                                             
        }                                                                                                                                                                                                                                                      
        var entity ="City_typeSet?&$filter=(Class eq " + "'" + flag + "'" + " and LocalOut eq "  +"'" + branch + "'" + " )";                                                                                                                                   
        oData1.read(entity,null,null,false,                                                                                                                                                                                                                    
        function(oData2){                                                                                                                                                                                                                                      
        Location = oData2;                                                                                                                                                                                                                                     
        Location.combomodel = comData.items;                                                                                                                                                                                                                   
        });                                                                                                                                                                                                                                                    
        oModel.setData(Location);                                                                                                                                                                                                                              
        this.getView().byId("table1").setModel(oModel);                                                                                                                                                                                                        
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                                                               
	},                                                                                                                                                                                                                                                            
	onradio: function(oEvent)                                                                                                                                                                                                                                     
	{                                                                                                                                                                                                                                                             
		var URL1 = "/sap/opu/odata/sap/ZGW_CITY_SRV/";                                                                                                                                                                                                               
        var oData1 = new sap.ui.model.odata.ODataModel(URL1,true);                                                                                                                                                                                             
        var Location = [];                                                                                                                                                                                                                                     
        var oModel = new sap.ui.model.json.JSONModel();                                                                                                                                                                                                        
	    var Key = this.getView().byId("RBGROUP0").getSelectedIndex();                                                                                                                                                                                             
	    var comData;                                                                                                                                                                                                                                              
        if(Key == "0")                                                                                                                                                                                                                                         
        {                                                                                                                                                                                                                                                      
        	var branch = "O";                                                                                                                                                                                                                                     
        	comData = { items:[ {key:"0",Category:"Saravana- Madhavaram DC"}]};                                                                                                                                                                                   
        	this.getView().byId("branchCombo").setModel(oModel);                                                                                                                                                                                                  
        	this.getView().byId("branchCombo").setSelectedKey('0');                                                                                                                                                                                               
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                                                               
        	                                                                                                                                                                                                                                                      
        }                                                                                                                                                                                                                                                      
        else                                                                                                                                                                                                                                                   
        {                                                                                                                                                                                                                                                      
        	 branch = "L";                                                                                                                                                                                                                                        
                	  comData = { items:[ {key:"0",Category:"Saravana- T-Nagar Store"},&nbsp;                                                                                                                                                                     
        						{key:"1",Category:"Saravana- Purasaiwalkam Store"},                                                                                                                                                                                              
        						{key:"2",Category:"Saravana- Chrompet Store"},&nbsp;                                                                                                                                                                                             
        						{key:"3",Category:"Saravana- Porur Store"} ] };                                                                                                                                                                                                  
        					this.getView().byId("branchCombo").setModel(oModel);                                                                                                                                                                                              
        }                                                                                                                                                                                                                                                      
        	                                                                                                                                                                                                                                                      
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                                                               
        						                                                                                                                                                                                                                                                 
        var entity ="City_typeSet?&$filter=(Class eq " + "'" + flag + "'" + " and LocalOut eq "  +"'" + branch + "'" + " )";                                                                                                                                   
        oData1.read(entity,null,null,false,                                                                                                                                                                                                                    
        function(oData2){                                                                                                                                                                                                                                      
        Location = oData2;                                                                                                                                                                                                                                     
        Location.combomodel = comData.items;                                                                                                                                                                                                                   
        });                                                                                                                                                                                                                                                    
        oModel.setData(Location);                                                                                                                                                                                                                              
        this.getView().byId("table1").setModel(oModel);                                                                                                                                                                                                        
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                                                               
	},                                                                                                                                                                                                                                                            
                                                                                                                                                                                                                                                               
	onSearch: function (oEvent)&nbsp;                                                                                                                                                                                                                             
	{                                                                                                                                                                                                                                                             
        var oTable = this.getView().byId("table1");                                                                                                                                                                                                            
        var sValue = oEvent.getSource().getValue();                                                                                                                                                                                                            
        oTable.getBinding("items").filter([new sap.ui.model.Filter([new sap.ui.model.Filter("Ort01",sap.ui.model.FilterOperator.Contains, sValue)], false)]);                                                                                                  
	},                                                                                                                                                                                                                                                            
	                                                                                                                                                                                                                                                              
	locnav: function(oEvent)                                                                                                                                                                                                                                      
	{                                                                                                                                                                                                                                                             
    	var SelectReqId = this.getView().byId("HeaderText1").getText();                                                                                                                                                                                           
		var Path = oEvent.oSource.getBindingContextPath();                                                                                                                                                                                                           
		var selectbranch = this.getView().byId("branchCombo").getSelectedKey();                                                                                                                                                                                      
		var locout = this.getView().byId("RBGROUP0").getSelectedIndex();                                                                                                                                                                                             
		var TableData = this.getView().byId("table1").getModel();                                                                                                                                                                                                    
		var SelectedItem =  TableData.getProperty(Path);                                                                                                                                                                                                             
		var sec = SelectedItem.Ort01;                                                                                                                                                                                                                                
		if(selectbranch == "")                                                                                                                                                                                                                                       
		{                                                                                                                                                                                                                                                            
			var msg = "Please select the Store";                                                                                                                                                                                                                        
			sap.m.MessageBox.show(msg, {                                                                                                                                                                                                                                
			actions: [sap.m.MessageBox.Action.CLOSE]                                                                                                                                                                                                                    
			});                                                                                                                                                                                                                                                         
		}                                                                                                                                                                                                                                                            
		else{                                                                                                                                                                                                                                                        
    	var oRouter = sap.ui.core.UIComponent.getRouterFor(this);                                                                                                                                                                                                 
		oRouter.navTo("View3", {                                                                                                                                                                                                                                     
		RqID:SelectReqId,                                                                                                                                                                                                                                            
		Info1:sec,                                                                                                                                                                                                                                                   
		App: Info,                                                                                                                                                                                                                                                   
		branch: selectbranch,                                                                                                                                                                                                                                        
		key : locout                                                                                                                                                                                                                                                 
		});                                                                                                                                                                                                                                                          
		}                                                                                                                                                                                                                                                            
	},                                                                                                                                                                                                                                                            
		                                                                                                                                                                                                                                                             
    onPage2Back: function (oEvt)                                                                                                                                                                                                                               
	{                                                                                                                                                                                                                                                             
		var oRouter = sap.ui.core.UIComponent.getRouterFor(this);                                                                                                                                                                                                    
		oRouter.navTo("View1");                                                                                                                                                                                                                                      
	}                                                                                                                                                                                                                                                             
});                                                                                                                                                                                                                                                            
});                                                                                                                                                                                                                                                            